apiVersion: v1
kind: ConfigMap
metadata:
  name: n8n-values
  namespace: flux-system
data:
  values.yaml: |
    db:
      type: postgresdb

    externalPostgresql:
      host: postgres.dbs.svc.cluster.local  # adjust to your PG service
      port: 5432
      database: n8n
      username: n8n
      password: ""   # overridden by secret

    encryptionKey: ""   # overridden by secret

    main:
      resources:
        requests:
          memory: 512Mi
        limits:
          memory: 1024Mi
      persistence:
        enabled: true
        storageClass: local-path
        size: 5Gi
        accessMode: ReadWriteOnce

    service:
      enabled: true
      type: ClusterIP
      port: 5678

    ingress:
      enabled: false

    diagnostics:
      enabled: false
